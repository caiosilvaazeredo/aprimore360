{% extends "base.html" %}

{% block title %}Pedidos - ComercialPRO
<script>
    let pedidos = [];
    let clientes = [];
    let pedidoModal;
    
    // Mapeamento de status
    const STATUS_FLOW = {
        'pendente': { next: 'aprovado', label: 'Pendente', color: 'warning', icon: 'clock' },
        'aprovado': { next: 'em_separacao', label: 'Aprovado', color: 'info', icon: 'check-circle' },
        'em_separacao': { next: 'enviado', label: 'Em Separa√ß√£o', color: 'primary', icon: 'box' },
        'enviado': { next: 'entregue', label: 'Enviado', color: 'success', icon: 'truck' },
        'entregue': { next: 'concluido', label: 'Entregue', color: 'success', icon: 'shipping-fast' },
        'concluido': { next: null, label: 'Conclu√≠do ‚úì', color: 'dark', icon: 'check-double' },
        'cancelado': { next: null, label: 'Cancelado', color: 'danger', icon: 'times-circle' }
    };
    
    document.addEventListener('DOMContentLoaded', function() {
        pedidoModal = new bootstrap.Modal(document.getElementById('pedidoModal'));
        
        const hoje = new Date();
        const inicioMes = new Date(hoje.getFullYear(), hoje.getMonth(), 1);
        document.getElementById('dataInicio').value = inicioMes.toISOString().split('T')[0];
        document.getElementById('dataFim').value = hoje.toISOString().split('T')[0];
        document.getElementById('pedidoData').value = hoje.toISOString().split('T')[0];
        
        loadClientes();
        loadPedidos();
        
        document.getElementById('itensPedido').addEventListener('input', calcularTotais);
        document.getElementById('pedidoDesconto').addEventListener('input', calcularTotais);
        document.getElementById('pedidoComissao').addEventListener('input', calcularTotais);
    });
    
    async function loadClientes() {
        try {
            const response = await fetch('/api/clientes');
            clientes = await response.json();
            
            const select = document.getElementById('pedidoCliente');
            select.innerHTML = '<option value="">Selecione um cliente...</option>';
            
            clientes.forEach(c => {
                const option = document.createElement('option');
                option.value = c.id;
                option.textContent = c.fantasia || c.razaoSocial;
                select.appendChild(option);
            });
        } catch (error) {
            console.error('Erro ao carregar clientes:', error);
        }
    }
    
    async function loadPedidos() {
        try {
            const response = await fetch('/api/pedidos');
            pedidos = await response.json();
            renderPedidos();
        } catch (error) {
            console.error('Erro ao carregar pedidos:', error);
            document.getElementById('pedidosTable').innerHTML = `
                <tr><td colspan="7" class="text-center text-danger">
                    Erro ao carregar pedidos
                </td></tr>
            `;
        }
    }
    
    function renderPedidos() {
        const tbody = document.getElementById('pedidosTable');
        
        if (pedidos.length === 0) {
            tbody.innerHTML = `
                <tr><td colspan="7" class="text-center text-muted py-4">
                    <i class="fas fa-inbox fa-2x mb-2"></i>
                    <p>Nenhum pedido encontrado</p>
                    <button class="btn btn-primary btn-sm" onclick="openPedidoModal()">
                        <i class="fas fa-plus me-2"></i>Criar Primeiro Pedido
                    </button>
                </td></tr>
            `;
            return;
        }
        
        tbody.innerHTML = pedidos.map(p => {
            const statusInfo = STATUS_FLOW[p.status] || STATUS_FLOW['pendente'];
            const data = p.data ? new Date(p.data.seconds ? p.data.seconds * 1000 : p.data).toLocaleDateString('pt-BR') : '-';
            const isConcluido = p.status === 'concluido';
            const isCancelado = p.status === 'cancelado';
            
            return `
                <tr ${isConcluido ? 'class="table-success"' : ''} ${isCancelado ? 'class="table-danger"' : ''}>
                    <td>
                        <strong>#${p.id.slice(-6)}</strong>
                        ${isConcluido ? '<br><span class="badge bg-success"><i class="fas fa-trophy me-1"></i>VENDA</span>' : ''}
                    </td>
                    <td>${p.clienteNome || 'N/A'}</td>
                    <td>${data}</td>
                    <td><strong>R$ ${(p.valorTotal || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})}</strong></td>
                    <td>R$ ${(p.comissaoValor || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>
                        <span class="badge bg-${statusInfo.color}">
                            <i class="fas fa-${statusInfo.icon} me-1"></i>${statusInfo.label}
                        </span>
                    </td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary btn-action" onclick="viewPedido('${p.id}')" title="Ver detalhes">
                                <i class="fas fa-eye"></i>
                            </button>
                            ${!isConcluido && !isCancelado && statusInfo.next ? `
                                <button class="btn btn-outline-success btn-action" onclick="avancarStatus('${p.id}')" 
                                        title="Avan√ßar para ${STATUS_FLOW[statusInfo.next].label}">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            ` : ''}
                            ${!isConcluido && !isCancelado ? `
                                <button class="btn btn-outline-danger btn-action" onclick="cancelPedido('${p.id}')" title="Cancelar">
                                    <i class="fas fa-times"></i>
                                </button>
                            ` : ''}
                        </div>
                    </td>
                </tr>
            `;
        }).join('');
    }
    
    function openPedidoModal() {
        document.getElementById('pedidoForm').reset();
        document.getElementById('itensPedido').innerHTML = '';
        adicionarItem();
        pedidoModal.show();
    }
    
    function adicionarItem() {
        const container = document.getElementById('itensPedido');
        const itemId = Date.now();
        
        const itemHtml = `
            <div class="row g-2 mb-2 item-pedido" data-item="${itemId}">
                <div class="col-md-5">
                    <input type="text" class="form-control form-control-sm" placeholder="Nome do produto" required>
                </div>
                <div class="col-md-2">
                    <input type="number" class="form-control form-control-sm item-quantidade" placeholder="Qtd" min="1" value="1" required>
                </div>
                <div class="col-md-3">
                    <input type="number" class="form-control form-control-sm item-preco" placeholder="Pre√ßo" min="0" step="0.01" required>
                </div>
                <div class="col-md-2">
                    <button type="button" class="btn btn-danger btn-sm w-100" onclick="removerItem(${itemId})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
        `;
        
        container.insertAdjacentHTML('beforeend', itemHtml);
        calcularTotais();
    }
    
    function removerItem(itemId) {
        const item = document.querySelector(`[data-item="${itemId}"]`);
        if (item) {
            item.remove();
            calcularTotais();
        }
    }
    
    function calcularTotais() {
        const itens = document.querySelectorAll('.item-pedido');
        let subtotal = 0;
        
        itens.forEach(item => {
            const qtd = parseFloat(item.querySelector('.item-quantidade').value) || 0;
            const preco = parseFloat(item.querySelector('.item-preco').value) || 0;
            subtotal += qtd * preco;
        });
        
        const desconto = parseFloat(document.getElementById('pedidoDesconto').value) || 0;
        const total = subtotal - desconto;
        const comissaoPercent = parseFloat(document.getElementById('pedidoComissao').value) || 0;
        const comissao = total * (comissaoPercent / 100);
        
        document.getElementById('subtotalValue').textContent = `R$ ${subtotal.toFixed(2)}`;
        document.getElementById('totalValue').textContent = `R$ ${total.toFixed(2)}`;
        document.getElementById('comissaoValue').textContent = `R$ ${comissao.toFixed(2)}`;
    }
    
    async function savePedido() {
        const clienteId = document.getElementById('pedidoCliente').value;
        const data = document.getElementById('pedidoData').value;
        
        if (!clienteId || !data) {
            showToast('Selecione cliente e data', 'warning');
            return;
        }
        
        const itemElements = document.querySelectorAll('.item-pedido');
        const itens = [];
        
        itemElements.forEach(item => {
            const nome = item.querySelector('input[placeholder="Nome do produto"]').value;
            const quantidade = parseFloat(item.querySelector('.item-quantidade').value);
            const preco = parseFloat(item.querySelector('.item-preco').value);
            
            if (nome && quantidade && preco) {
                itens.push({
                    nome,
                    quantidade,
                    preco,
                    total: quantidade * preco
                });
            }
        });
        
        if (itens.length === 0) {
            showToast('Adicione pelo menos um item', 'warning');
            return;
        }
        
        const subtotal = itens.reduce((sum, i) => sum + i.total, 0);
        const desconto = parseFloat(document.getElementById('pedidoDesconto').value) || 0;
        const valorTotal = subtotal - desconto;
        const comissaoPercent = parseFloat(document.getElementById('pedidoComissao').value) || 0;
        const comissaoValor = valorTotal * (comissaoPercent / 100);
        
        const pedidoData = {
            clienteId,
            data,
            itens,
            subtotal,
            desconto,
            valorTotal,
            comissaoPercent,
            comissaoValor,
            observacoes: document.getElementById('pedidoObs').value || '',
            status: 'pendente'
        };
        
        try {
            const response = await fetch('/api/pedidos', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(pedidoData)
            });
            
            const result = await response.json();
            
            if (response.ok) {
                pedidoModal.hide();
                showToast('‚úÖ Pedido criado com sucesso!', 'success');
                loadPedidos();
            } else {
                showToast(result.error || 'Erro ao criar pedido', 'danger');
            }
        } catch (error) {
            console.error('Erro ao salvar pedido:', error);
            showToast('Erro ao salvar pedido', 'danger');
        }
    }
    
    async function avancarStatus(id) {
        const pedido = pedidos.find(p => p.id === id);
        if (!pedido) return;
        
        const currentStatus = STATUS_FLOW[pedido.status];
        if (!currentStatus || !currentStatus.next) return;
        
        const nextStatus = STATUS_FLOW[currentStatus.next];
        const isConclusion = currentStatus.next === 'concluido';
        
        let confirmMsg = `Avan√ßar para "${nextStatus.label}"?`;
        if (isConclusion) {
            confirmMsg = 'üéâ Concluir pedido e registrar como VENDA?\n\nIsso atualizar√° as estat√≠sticas do cliente.';
        }
        
        if (!confirm(confirmMsg)) return;
        
        try {
            const response = await fetch(`/api/pedidos/${id}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ status: currentStatus.next })
            });
            
            if (response.ok) {
                if (isConclusion) {
                    showToast('üéä PARAB√âNS! Pedido conclu√≠do e registrado como venda!', 'success');
                } else {
                    showToast(`Status atualizado para "${nextStatus.label}"`, 'success');
                }
                loadPedidos();
            } else {
                showToast('Erro ao atualizar status', 'danger');
            }
        } catch (error) {
            console.error('Erro:', error);
            showToast('Erro ao atualizar status', 'danger');
        }
    }
    
    async function cancelPedido(id) {
        if (!confirm('‚ö†Ô∏è Tem certeza que deseja CANCELAR este pedido?')) return;
        
        try {
            const response = await fetch(`/api/pedidos/${id}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ status: 'cancelado' })
            });
            
            if (response.ok) {
                showToast('Pedido cancelado', 'warning');
                loadPedidos();
            } else {
                showToast('Erro ao cancelar', 'danger');
            }
        } catch (error) {
            showToast('Erro ao cancelar', 'danger');
        }
    }
    
    function viewPedido(id) {
        const pedido = pedidos.find(p => p.id === id);
        if (!pedido) return;
        
        const statusInfo = STATUS_FLOW[pedido.status] || STATUS_FLOW['pendente'];
        const itensHtml = (pedido.itens || []).map(i => 
            `${i.quantidade}x ${i.nome} - R$ ${i.preco.toFixed(2)} = R$ ${i.total.toFixed(2)}`
        ).join('\n');
        
        alert(`üì¶ PEDIDO #${id.slice(-6)}

üë§ Cliente: ${pedido.clienteNome}
üìÖ Data: ${new Date(pedido.data.seconds ? pedido.data.seconds * 1000 : pedido.data).toLocaleDateString('pt-BR')}
üìä Status: ${statusInfo.label}

üõí ITENS:
${itensHtml}

üí∞ Subtotal: R$ ${(pedido.subtotal || 0).toFixed(2)}
üí≥ Desconto: R$ ${(pedido.desconto || 0).toFixed(2)}
üíµ TOTAL: R$ ${(pedido.valorTotal || 0).toFixed(2)}
üíº Comiss√£o: R$ ${(pedido.comissaoValor || 0).toFixed(2)} (${(pedido.comissaoPercent || 0)}%)

${pedido.observacoes ? 'üìù Obs: ' + pedido.observacoes : ''}`);
    }
    
    function filterPedidos() {
        const status = document.getElementById('filterStatus').value;
        const dataInicio = document.getElementById('dataInicio').value;
        const dataFim = document.getElementById('dataFim').value;
        
        let filtered = [...pedidos];
        
        if (status) {
            filtered = filtered.filter(p => p.status === status);
        }
        
        if (dataInicio || dataFim) {
            filtered = filtered.filter(p => {
                const pedidoDate = new Date(p.data.seconds ? p.data.seconds * 1000 : p.data);
                const inicio = dataInicio ? new Date(dataInicio) : new Date('1900-01-01');
                const fim = dataFim ? new Date(dataFim) : new Date('2100-12-31');
                return pedidoDate >= inicio && pedidoDate <= fim;
            });
        }
        
        pedidos = filtered;
        renderPedidos();
    }
    
    function exportPedidos() {
        const csv = [
            ['ID', 'Cliente', 'Data', 'Valor', 'Comiss√£o', 'Status'].join(','),
            ...pedidos.map(p => [
                p.id.slice(-6),
                (p.clienteNome || '').replace(/,/g, ';'),
                p.data ? new Date(p.data.seconds ? p.data.seconds * 1000 : p.data).toLocaleDateString('pt-BR') : '',
                p.valorTotal || 0,
                p.comissaoValor || 0,
                (STATUS_FLOW[p.status]?.label || p.status).replace(/,/g, ';')
            ].join(','))
        ].join('\n');
        
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `pedidos_${new Date().toISOString().split('T')[0]}.csv`;
        a.click();
        URL.revokeObjectURL(url);
    }
    
    function showToast(message, type = 'info') {
        const bgColors = {
            success: '#10b981',
            danger: '#ef4444',
            warning: '#f59e0b',
            info: '#3b82f6'
        };
        
        const toast = document.createElement('div');
        toast.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            background: ${bgColors[type] || bgColors.info};
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-weight: 500;
            max-width: 400px;
            animation: slideIn 0.3s ease;
        `;
        toast.textContent = message;
        
        document.body.appendChild(toast);
        setTimeout(() => {
            toast.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => toast.remove(), 300);
        }, 4000);
    }
</script>

<style>
@keyframes slideIn {
    from { transform: translateX(400px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(400px); opacity: 0; }
}

.table-success {
    background-color: rgba(16, 185, 129, 0.1) !important;
}

.table-danger {
    background-color: rgba(239, 68, 68, 0.1) !important;
}

#subtotalValue, #totalValue, #comissaoValue {
    font-weight: 600;
    color: #667eea;
}
</style>

{% endblock %}

{% block content %}
<div class="pedidos-content">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h4 class="mb-1">Gest√£o de Pedidos</h4>
            <p class="text-muted mb-0">Acompanhe seus pedidos e comiss√µes</p>
        </div>
        <button class="btn btn-primary" onclick="openPedidoModal()">
            <i class="fas fa-plus me-2"></i>Novo Pedido
        </button>
    </div>
    
    <!-- Cards de Resumo -->
    <div class="row g-4 mb-4">
        <div class="col-md-3">
            <div class="summary-card">
                <div class="summary-icon" style="background: #667eea;">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="summary-info">
                    <h3 id="totalPedidos">0</h3>
                    <p>Total de Pedidos</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="summary-card">
                <div class="summary-icon" style="background: #10b981;">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="summary-info">
                    <h3 id="valorTotal">R$ 0</h3>
                    <p>Valor Total</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="summary-card">
                <div class="summary-icon" style="background: #f59e0b;">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="summary-info">
                    <h3 id="pendentes">0</h3>
                    <p>Pendentes</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="summary-card">
                <div class="summary-icon" style="background: #ef4444;">
                    <i class="fas fa-percentage"></i>
                </div>
                <div class="summary-info">
                    <h3 id="comissoes">R$ 0</h3>
                    <p>Comiss√µes</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Filtros -->
    <div class="card-custom mb-4">
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-3">
                    <input type="date" class="form-control" id="dataInicio" onchange="filterPedidos()">
                </div>
                <div class="col-md-3">
                    <input type="date" class="form-control" id="dataFim" onchange="filterPedidos()">
                </div>
                <div class="col-md-3">
                    <select class="form-select" id="filterStatusPedido" onchange="filterPedidos()">
                        <option value="">Todos os Status</option>
                        <option value="pendente">Pendente</option>
                        <option value="aprovado">Aprovado</option>
                        <option value="entregue">Entregue</option>
                        <option value="cancelado">Cancelado</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-outline-secondary w-100" onclick="exportPedidos()">
                        <i class="fas fa-file-excel me-2"></i>Exportar
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Lista de Pedidos -->
    <div class="card-custom">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Pedido</th>
                        <th>Cliente</th>
                        <th>Data</th>
                        <th>Valor</th>
                        <th>Comiss√£o</th>
                        <th>Status</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="pedidosTable">
                    <tr>
                        <td colspan="7" class="text-center py-4">
                            <i class="fas fa-spinner fa-spin fa-2x"></i>
                            <p class="mt-2 mb-0">Carregando pedidos...</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modal Novo Pedido -->
<div class="modal fade" id="pedidoModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-shopping-cart me-2"></i>Novo Pedido
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="pedidoForm">
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <label class="form-label">Cliente *</label>
                            <select class="form-select" id="pedidoCliente" required>
                                <option value="">Selecione um cliente</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Data *</label>
                            <input type="date" class="form-control" id="pedidoData" required>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Comiss√£o (%)</label>
                            <input type="number" class="form-control" id="pedidoComissao" value="5" min="0" max="100" step="0.1">
                        </div>
                    </div>
                    
                    <!-- Itens do Pedido -->
                    <h6 class="mb-3"><i class="fas fa-list me-2"></i>Itens do Pedido</h6>
                    <div id="itensPedido">
                        <div class="item-row mb-3">
                            <div class="row g-2">
                                <div class="col-md-5">
                                    <input type="text" class="form-control" placeholder="Descri√ß√£o do produto" required>
                                </div>
                                <div class="col-md-2">
                                    <input type="number" class="form-control" placeholder="Qtd" min="1" value="1" required>
                                </div>
                                <div class="col-md-3">
                                    <input type="number" class="form-control" placeholder="Valor unit." step="0.01" required>
                                </div>
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-outline-danger w-100" onclick="removeItem(this)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button type="button" class="btn btn-outline-primary btn-sm mb-4" onclick="addItem()">
                        <i class="fas fa-plus me-2"></i>Adicionar Item
                    </button>
                    
                    <!-- Totais -->
                    <div class="bg-light p-3 rounded">
                        <div class="row">
                            <div class="col-md-6">
                                <label class="form-label">Desconto (R$)</label>
                                <input type="number" class="form-control" id="pedidoDesconto" value="0" min="0" step="0.01" onchange="calcularTotais()">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Total do Pedido</label>
                                <h3 id="pedidoTotal" class="text-success mb-0">R$ 0,00</h3>
                                <small class="text-muted">Comiss√£o: <span id="pedidoComissaoValor">R$ 0,00</span></small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <label class="form-label">Observa√ß√µes</label>
                        <textarea class="form-control" id="pedidoObs" rows="2"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="savePedido()">
                    <i class="fas fa-save me-2"></i>Salvar Pedido
                </button>
            </div>
        </div>
    </div>
</div>

<style>
    .card-custom {
        background: white;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        overflow: hidden;
    }
    
    .summary-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        display: flex;
        align-items: center;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }
    
    .summary-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
        margin-right: 15px;
    }
    
    .summary-info h3 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 700;
        color: #1e293b;
    }
    
    .summary-info p {
        margin: 0;
        color: #64748b;
        font-size: 0.85rem;
    }
    
    .table th {
        font-weight: 600;
        color: #64748b;
        font-size: 0.85rem;
        text-transform: uppercase;
        border-bottom: 2px solid #f1f5f9;
    }
    
    .table td {
        vertical-align: middle;
        padding: 15px;
    }
    
    .pedido-id {
        font-weight: 600;
        color: #667eea;
    }
    
    .status-badge {
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
    }
    
    .status-pendente {
        background: rgba(245, 158, 11, 0.1);
        color: #f59e0b;
    }
    
    .status-aprovado {
        background: rgba(16, 185, 129, 0.1);
        color: #10b981;
    }
    
    .status-entregue {
        background: rgba(102, 126, 234, 0.1);
        color: #667eea;
    }
    
    .status-cancelado {
        background: rgba(239, 68, 68, 0.1);
        color: #ef4444;
    }
    
    .btn-action {
        width: 32px;
        height: 32px;
        padding: 0;
        border-radius: 8px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
</style>

